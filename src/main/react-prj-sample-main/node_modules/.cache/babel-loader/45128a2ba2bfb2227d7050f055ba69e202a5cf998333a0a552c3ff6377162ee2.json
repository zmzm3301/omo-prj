{"ast":null,"code":"import _slicedToArray from\"C:/Users/zmzm3/git/omo/omo-prj/src/main/react-prj-sample-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import NewNavBoard from\"../../components/NewNavBoard\";import{Link}from\"react-router-dom\";import{useEffect,useState}from\"react\";import axios from\"axios\";import{useSelector}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function BoardList(){var isLoggedIn=useSelector(function(state){return state.isLoggedIn;});var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPost=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),maxInt=_useState4[0],setMaxInt=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),total=_useState6[0],setTotal=_useState6[1];var _useState7=useState(1),_useState8=_slicedToArray(_useState7,2),currentPage=_useState8[0],setCurrentPage=_useState8[1];var pageSize=5;var page=[];var onPrevButton=function onPrevButton(){if(currentPage>1){setCurrentPage(currentPage-1);}};var onNextButton=function onNextButton(){setCurrentPage(currentPage+1);};useEffect(function(){axios.get('/api/post/list').then(function(res){var startPage=(currentPage-1)*pageSize;var endPage=startPage+pageSize;var post=res.data.slice(startPage,endPage);console.log(post);setTotal(post.length);setPost(post);}).catch(function(error){return console.log(error);});},[currentPage]);useEffect(function(){if(total>5){if(total%5!==0){setMaxInt(Math.floor(total/5+1));}else{setMaxInt(Math.floor(total/5));}}},[total]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(NewNavBoard,{}),/*#__PURE__*/_jsxs(\"div\",{style:{margin:\"auto\",width:\"60%\"},className:\"h-screen\",id:\"boardListDiv\",children:[/*#__PURE__*/_jsx(\"div\",{children:\".\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-20 text-2xl font-bold\",children:\"\\uAC8C\\uC2DC\\uD310\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"board-table mt-5 \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"pb-3 col-1\",children:\"\\uBC88\\uD638\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"pb-3 col-2\",children:\"\\uC81C\\uBAA9\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"pb-3 col-1\",children:\"\\uC774\\uB984\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"pb-3 col-1\",children:\"\\uB4F1\\uB85D\\uC77C\"})]})}),posts.map(function(post){return/*#__PURE__*/_jsx(\"tbody\",{className:\"border-t-2 border-black \",children:/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-gray-300\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"pt-2 pb-2 text-sm text-center\",children:post.notice?\"공지\":post.id}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(Link,{to:\"/board/detail/\".concat(post.id),className:\"text-sm\",children:post.notice?\"[공지사항]\"+post.title:post.title})}),/*#__PURE__*/_jsx(\"td\",{className:\"pt-2 pb-2 text-sm text-center\",children:post.author_id}),/*#__PURE__*/_jsx(\"td\",{className:\"pt-2 pb-2 text-sm text-center\",children:post.updatedAt?post.updatedAt:post.createdAt})]})},post.id);})]}),isLoggedIn?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end mt-4\",children:/*#__PURE__*/_jsx(Link,{to:\"/board/create\",children:/*#__PURE__*/_jsx(\"button\",{className:\"w-12 mr-16 text-sm text-white bg-blue-500 rounded-sm h-7 hover:bg-blue-600\",children:\"\\uB4F1\\uB85D\"})})}):/*#__PURE__*/_jsx(_Fragment,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center mt-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:onPrevButton,children:\"\\uC774\\uC804 \\uD398\\uC774\\uC9C0\"}),/*#__PURE__*/_jsx(Link,{className:\"w-4 text-sm text-center\",children:maxInt}),/*#__PURE__*/_jsx(\"button\",{onClick:onNextButton,children:\"\\uB2E4\\uC74C \\uD398\\uC774\\uC9C0\"})]}),page]})]})]});}","map":{"version":3,"names":["NewNavBoard","Link","useEffect","useState","axios","useSelector","BoardList","isLoggedIn","state","posts","setPost","maxInt","setMaxInt","total","setTotal","currentPage","setCurrentPage","pageSize","page","onPrevButton","onNextButton","get","then","res","startPage","endPage","post","data","slice","console","log","length","catch","error","Math","floor","margin","width","map","notice","id","title","author_id","updatedAt","createdAt"],"sources":["C:/Users/zmzm3/git/omo/omo-prj/src/main/react-prj-sample-main/src/pages/Board/BoardList.js"],"sourcesContent":["import NewNavBoard from \"../../components/NewNavBoard\";\nimport { Link } from \"react-router-dom\";\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { useSelector } from \"react-redux\";\n\nexport default function BoardList() {\n  const isLoggedIn = useSelector(state => state.isLoggedIn)\n  const [posts, setPost] = useState([]);\n  const [maxInt, setMaxInt] = useState();\n  const [total, setTotal] = useState();\n  const [currentPage, setCurrentPage] = useState(1);\n  const pageSize = 5;\n  let page = []\n\n\n\n  const onPrevButton = () => {\n    if (currentPage > 1) {\n      setCurrentPage(currentPage - 1)\n    }\n  }\n\n  const onNextButton = () => {\n    setCurrentPage(currentPage + 1)\n  }\n\n  useEffect(() => {\n\n\n    axios.get('/api/post/list').then(res => {\n      const startPage = (currentPage - 1) * pageSize;\n      const endPage = startPage + pageSize;\n      const post = res.data.slice(startPage, endPage);\n      console.log(post)\n      setTotal(post.length)\n      setPost(post);\n\n\n    }).catch(error => console.log(error))\n\n\n  }, [currentPage])\n\n  useEffect(() => {\n    if (total > 5) {\n      if (total % 5 !== 0) {\n        setMaxInt(Math.floor(total / 5 + 1))\n      } else {\n        setMaxInt(Math.floor(total / 5))\n      }\n    }\n  }, [total]);\n\n  return (\n    <div>\n      <NewNavBoard />\n      <div\n        style={{ margin: \"auto\", width: \"60%\" }}\n        className=\"h-screen\"\n        id=\"boardListDiv\"\n      >\n        <div>.</div>\n        <p className=\"mt-20 text-2xl font-bold\">게시판</p>\n        <table className=\"board-table mt-5 \">\n          <thead>\n            <tr className=\"text-center\">\n              <th scope=\"col\" className=\"pb-3 col-1\">\n                번호\n              </th>\n              <th scope=\"col\" className=\"pb-3 col-2\">\n                제목\n              </th>\n              <th scope=\"col\" className=\"pb-3 col-1\">\n                이름\n              </th>\n              <th scope=\"col\" className=\"pb-3 col-1\">\n                등록일\n              </th>\n            </tr>\n          </thead>\n          {posts.map((post) => (\n            <tbody className=\"border-t-2 border-black \" key={post.id}>\n              <tr className=\"border-b border-gray-300\">\n                <td className=\"pt-2 pb-2 text-sm text-center\">{post.notice ? \"공지\" : post.id}</td>\n                <th>\n                  <Link to={`/board/detail/${post.id}`} className=\"text-sm\">\n                    {post.notice ? \"[공지사항]\" + post.title : post.title}\n                  </Link>\n                </th>\n                <td className=\"pt-2 pb-2 text-sm text-center\">{post.author_id}</td>\n                <td className=\"pt-2 pb-2 text-sm text-center\">{post.updatedAt ? post.updatedAt : post.createdAt}</td>\n              </tr>\n            </tbody>\n          ))}\n        </table>\n        {isLoggedIn ?\n          <div className=\"flex justify-end mt-4\">\n            <Link to=\"/board/create\">\n              <button className=\"w-12 mr-16 text-sm text-white bg-blue-500 rounded-sm h-7 hover:bg-blue-600\">\n                등록\n              </button>\n            </Link>\n          </div>\n          :\n          <></>\n        }\n\n        <div className=\"flex justify-center mt-2\">\n\n\n          <div>\n            <button onClick={onPrevButton}>이전 페이지</button>\n            <Link className=\"w-4 text-sm text-center\">{maxInt}</Link>\n            <button onClick={onNextButton}>다음 페이지</button>\n          </div>\n          {/* {maxInt.map((m, index) = (\n            <Link className=\"w-4 text-sm text-center\" key={}>{m}</Link>\n          ))} */}\n          {page}\n          {/* <div>\n              <button onClick={onPrevButton}>이전 페이지</button>\n              <Link className=\"w-4 text-sm text-center\">{maxInt}</Link>\n              <button onClick={onNextButton}>다음 페이지</button>\n            </div> */}\n\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}